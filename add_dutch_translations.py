#!/usr/bin/env python3
import json
import os
import tempfile
import shutil

# Path to the Localizable.xcstrings file
file_path = '/Users/rabble/code/verse/nos/Nos/Assets/Localization/Localizable.xcstrings'

# Create a backup of the original file
backup_file = file_path + '.bak'
shutil.copy2(file_path, backup_file)
print(f"Created backup at {backup_file}")

# Load the translations file (since we'll be modifying it, we need to load it completely)
with open(file_path, 'r', encoding='utf-8') as f:
    data = json.load(f)

# Define your Dutch translations here
dutch_translations = {
    "acceptTermsAndPrivacy": "Door verder te gaan, accepteer ik de [Servicevoorwaarden](https://nos.social/terms-of-service) en het [Privacybeleid](https://nos.social/privacy)",
    "accountPartialSuccessDescription": "De app kon je gekozen Weergavenaam of Gebruikersnaam niet opslaan. Je kunt deze later instellen in je Profiel.",
    "accountPartialSuccessHeadline": "Je hebt je account ingesteld, maar...",
    "accountSuccessDescription": "Nu je weet wie je bent op Nostr, laten we andere mensen vinden om te volgen!",
    "accountSuccessHeadline": "Je hebt je account ingesteld!",
    "addListsDescription": "Voeg lijsten toe aan je feed om te filteren op onderwerp.",
    "ageVerificationDescription": "Om juridische redenen moeten we ervoor zorgen dat je ouder bent dan deze leeftijd om Nos te gebruiken.",
    "ageVerificationHeadline": "Ben je ouder dan 16 jaar?",
    "alreadyHaveANIP05": "Nee, bedankt. Ik heb al een NIP-05",
    "anyRelaysSupportingNIP40": "Geen van je relays ondersteunt berichten die verlopen. Voeg er een toe en probeer het opnieuw.",
    "anErrorOccurred": "Er is een fout opgetreden.",
    "bio": "Bio",
    "bioPlaceholder": "Vertel iets over jezelf...",
    "buildYourNetworkDescription": "Nostr wordt beter als je mensen volgt. Laten we je feed vullen!",
    "buildYourNetworkHeadline": "Bouw je netwerk",
    "cancel": "Annuleren",
    "cantSaveYourUsername": "Kan je gebruikersnaam niet opslaan",
    "chooseNIP05Provider": "Kies een NIP-05 provider",
    "chooseStrongKeyphrase": "Kies een sterke wachtwoordzin",
    "clickToViewSensitiveContent": "Klik om gevoelige inhoud te bekijken",
    "completeSetup": "Installatie voltooien",
    "confirming": "Bevestigen...",
    "connecting": "Verbinden...",
    "contentHiddenWarning": "Deze inhoud is verborgen omdat het niet geschikt is voor alle kijkers",
    "continue": "Doorgaan",
    "copied": "Gekopieerd",
    "copyFailed": "Kopiëren mislukt",
    "copyKey": "Kopieer sleutel",
    "copyNpub": "Kopieer npub",
    "copyPublicKey": "Kopieer openbare sleutel",
    "createAccount": "Account aanmaken",
    "createAccountDescription": "Een account maken in een open, gebruiker-gecontroleerd netwerk.",
    "createNewAccount": "Maak een nieuw account",
    "createNewKey": "Nieuwe sleutel aanmaken",
    "createPublishedBy": "Gemaakt %@ - Gepubliceerd door %@",
    "createANewPost": "Maak een nieuw bericht",
    "defaultContentWarning": "Gevoelige inhoud",
    "defaultDisplayName": "Nieuwe Nostronaut",
    "defaults": "Standaardinstellingen",
    "delete": "Verwijderen",
    "deleteAccount": "Account verwijderen",
    "deleteAccountQuestion": "Account verwijderen?",
    "deleteConfirmation": "Weet je zeker dat je dit wilt verwijderen?",
    "deleteUndoneWarning": "Deze actie kan niet ongedaan worden gemaakt.",
    "disconnected": "Verbinding verbroken",
    "displayName": "Weergavenaam",
    "displayNamePlaceholder": "Jouw weergavenaam",
    "displayNamePrompt": "Hoe wil je dat anderen je kennen?",
    "done": "Klaar",
    "dontHaveNpub": "Heb je geen npub? Maak een nieuwe aan!",
    "dontLoseYourKey": "Verlies je sleutel niet!",
    "edit": "Bewerken",
    "editAccount": "Account bewerken",
    "editDisplayName": "Weergavenaam bewerken",
    "editProfile": "Profiel bewerken",
    "editUsername": "Gebruikersnaam bewerken",
    "emptyFeed": "Lege feed",
    "enterDisplayName": "Voer weergavenaam in",
    "enterUsernamePlaceholder": "Gebruikersnaam invoeren",
    "enterYourPrivateKey": "Voer je privésleutel in",
    "eventCouldNotBeDecrypted": "Bericht kon niet worden ontsleuteld",
    "eventRemotelyDeleted": "Deze post is verwijderd door de auteur",
    "events": "Gebeurtenissen",
    "everyone": "Iedereen",
    "expirationTime": "Vervaltijd",
    "feed": "Feed",
    "feedEmpty": "Je feed is leeg!",
    "feedEmptyDescription": "Zoek mensen om te volgen om je feed te vullen",
    "feedOfPeopleIFollow": "Feed van mensen die ik volg",
    "feedsSelection": "Feedselectie",
    "filterWarning": "Inhoud kan gewelddadige, grafische of seksuele inhoud bevatten",
    "findFriendsDescription": "Vind vrienden door hen direct te vragen om verbinding te maken.",
    "findFriendsHeadline": "Vrienden vinden",
    "findPeople": "Vind mensen",
    "flag": "Markeren",
    "flagAsSpam": "Als spam markeren",
    "flagConfirm": "Bevestig markering",
    "flagInappropriate": "Markeer als ongepast",
    "flagPrompt": "Waarom markeer je deze post?",
    "flagReason": "Reden voor markering",
    "flagThisAuthor": "Deze auteur markeren",
    "flagThisPost": "Dit bericht markeren",
    "flagUser": "Gebruiker markeren",
    "follow": "Volgen",
    "followFormat": "%@ volgen",
    "followers": "Volgers",
    "following": "Volgend",
    "followingFormat": "%@ volgend",
    "generateNew": "Nieuwe genereren",
    "getStarted": "Begin",
    "giftedUserSignup": "U heeft een gratis proefabonnement ontvangen",
    "goToFeed": "Ga naar feed",
    "harassing": "Intimidatie",
    "hide": "Verbergen",
    "home": "Thuis",
    "iAcceptTheTerms": "Ik ga akkoord met de voorwaarden",
    "iAmOver16": "Ik ben ouder dan 16",
    "illegal": "Illegaal",
    "importNsec": "Nsec importeren",
    "importNsecDescription": "Login met een bestaande Nostr sleutel",
    "inNewPost": "In nieuw bericht",
    "inappropriate": "Ongepast",
    "incorrectPrivateKey": "Onjuiste privésleutel",
    "invalidLink": "Ongeldige link",
    "joined": "Lid geworden",
    "keyPhraseHint": "Deze wordt gebruikt om je privésleutel te versleutelen, dus zorg ervoor dat het sterk is en uniek voor jou.",
    "keyphraseHint": "Gebruik een unieke wachtwoordzin die je kunt onthouden",
    "keywordSearch": "Zoeken naar trefwoorden",
    "keywordSearchPlaceholder": "Zoeken naar sleutelwoorden",
    "learnMore": "Meer informatie",
    "leaveAComment": "Laat een reactie achter...",
    "letsGetYouSet": "Laten we je instellen!",
    "like": "Vind ik leuk",
    "likes": "Vind-ik-leuks",
    "loading": "Laden...",
    "login": "Inloggen",
    "logout": "Uitloggen",
    "manageLists": "Lijsten beheren",
    "manageSettings": "Instellingen beheren",
    "mention": "Vermelden",
    "message": "Bericht",
    "messagesHiddenWarning": "Berichten zijn verborgen",
    "missingLightningAddress": "Ontbrekend Lightning-adres",
    "moderation": "Moderatie",
    "myFeed": "Mijn feed",
    "name": "Naam",
    "newPost": "Nieuw bericht",
    "next": "Volgende",
    "nip05Description": "Een verificatiemethode voor je identiteit. Je kunt een NIP-05 van een provider krijgen of je eigen domein gebruiken.",
    "nip05Username": "NIP-05 gebruikersnaam",
    "no": "Nee",
    "noFollowers": "Geen volgers",
    "noFollowing": "Volgt niemand",
    "noPeople": "Geen mensen",
    "noPosts": "Geen berichten",
    "noResults": "Geen resultaten",
    "nosFeatures": "Nos-functies",
    "nostrID": "Nostr ID",
    "nostrIDBech32Format": "Nostr ID (bech32 formaat)",
    "nostrIDHex": "Nostr ID (hex formaat)",
    "nostrWhy": "Waarom Nostr?",
    "not16Description": "Vóór dat we verdergaan, moeten we bevestigen dat je minstens 16 jaar oud bent. Dit is een wettelijke vereiste.",
    "not16Headline": "Je bent nog niet oud genoeg om Nos te gebruiken",
    "noteDeleted": "Notitie verwijderd",
    "notePublishError": "Fout bij publiceren van notitie",
    "notifications": "Meldingen",
    "notificationsEmpty": "Je hebt geen meldingen",
    "nudity": "Naaktheid",
    "offlinePublishing": "Offline publiceren",
    "offlinePublishingDisabled": "Offline publiceren uitgeschakeld",
    "offlinePublishingEnabled": "Offline publiceren ingeschakeld",
    "ok": "OK",
    "onceYouDelete": "Zodra je je account hebt verwijderd, kun je deze niet meer herstellen.",
    "openInBrowser": "Openen in browser",
    "or": "of",
    "over16": "Ben je ouder dan 16 jaar?",
    "peopleFollowingYou": "Mensen die jou volgen",
    "peopleYouFollow": "Mensen die je volgt",
    "person": "Persoon",
    "pickUsername": "Kies een gebruikersnaam",
    "post": "Plaatsen",
    "postDeleted": "Bericht verwijderd",
    "postDeleteFailed": "Verwijderen van bericht mislukt",
    "postReply": "Antwoord plaatsen",
    "posts": "Berichten",
    "postThisNow": "Nu plaatsen",
    "postThisOnReconnect": "Plaatsen bij verbinding",
    "pressHereToScan": "Druk hier om te scannen",
    "privateKey": "Privésleutel",
    "privateKeyBackupDescription": "Deze sleutel geeft toegang tot je account. Plaats deze ergens veilig zoals een wachtwoordbeheerder.",
    "privateKeyDescription": "Deze sleutel geeft toegang tot je account. Zorg dat je deze veilig bewaart!",
    "privateKeyPlaceholder": "Voer uw nsec of hex privésleutel in",
    "privateKeyPrompt": "Voer uw privésleutel in",
    "privateKeyVisibility": "Zichtbaarheid privésleutel",
    "profile": "Profiel",
    "profileUpdated": "Profiel bijgewerkt",
    "publicKey": "Openbare sleutel",
    "publicKeyDescription": "Deel deze sleutel om anderen te laten verbinden met jou",
    "publish": "Publiceren",
    "publishAndReconnect": "Publiceren en opnieuw verbinden",
    "publishedEvents": "Gepubliceerde gebeurtenissen",
    "readMore": "Meer lezen",
    "readMoreDescription": "Lees meer over Nos en de nostr-standaard op onze website.",
    "reload": "Herladen",
    "relayInformation": "Relay-informatie",
    "relays": "Relays",
    "remove": "Verwijderen",
    "removeImage": "Afbeelding verwijderen",
    "removeMedia": "Media verwijderen",
    "reply": "Antwoorden",
    "replyCount": "%@ antwoorden",
    "replyFormat": "Antwoorden op %@",
    "replyingTo": "Antwoorden op",
    "replyingToYou": "Antwoord aan jou",
    "reportABug": "Meld een bug",
    "reportConfirmation": "Je rapport is verzonden. Dank je!",
    "reportSuccessHeadline": "Dank voor het verzenden van je rapport",
    "reportThisPost": "Dit bericht rapporteren",
    "reset": "Resetten",
    "repost": "Repost",
    "reposted": "Gerepost",
    "repostedYourPost": "heeft je bericht gerepost",
    "requestProfileError": "Fout bij het opvragen van profiel",
    "retry": "Opnieuw proberen",
    "revealKey": "Sleutel tonen",
    "save": "Opslaan",
    "saveKey": "Sleutel opslaan",
    "saveKeySomewhereSafe": "Sla deze sleutel ergens veilig op",
    "saveSettingFailed": "Instelling opslaan mislukt",
    "saveYourPrivateKey": "Sla je privésleutel op",
    "scanQRCode": "QR-code scannen",
    "search": "Zoeken",
    "searchEmpty": "Geen resultaten gevonden",
    "searchUsername": "Zoek gebruikersnaam",
    "seemsLikeYouHaventPosted": "Het lijkt erop dat je nog niets hebt gepost",
    "selectTopic": "Selecteer onderwerp",
    "sensitiveContent": "Gevoelige inhoud",
    "sensitiveContentWarningDescription": "Deze inhoud kan gevoelig zijn. Tik om te bekijken.",
    "sensitiveImages": "Gevoelige afbeeldingen",
    "sensitiveImagesShow": "Gevoelige afbeeldingen tonen",
    "sensitiveImagesWarning": "Deze afbeelding kan gevoelige inhoud bevatten",
    "serverCapabilities": "Servermogelijkheden",
    "settings": "Instellingen",
    "setup": "Instellen",
    "shareNpub": "Deel npub",
    "shareProfile": "Deel profiel",
    "shareYourPublicKey": "Deel je publieke sleutel",
    "sharKeyPublicly": "Je sleutel openbaar delen",
    "showAll": "Alles tonen",
    "showMore": "Meer tonen",
    "signUp": "Aanmelden",
    "signUpForNosUsingExistingKey": "Meld je aan voor Nos met een bestaande sleutel",
    "skipThisStep": "Deze stap overslaan",
    "somethingWentWrong": "Er is iets misgegaan",
    "spam": "Spam",
    "startMessaging": "Begin met berichten",
    "submit": "Indienen",
    "switch": "Wisselen",
    "tapToScan": "Tik om te scannen",
    "termsOfService": "Servicevoorwaarden",
    "termsPartOne": "Door op Doorgaan te klikken, ga je akkoord met onze",
    "termsPartTwo": "Servicevoorwaarden",
    "thisPostHasBeenDeleted": "Dit bericht is verwijderd",
    "time": "Tijd",
    "today": "Vandaag",
    "tryAgain": "Probeer opnieuw",
    "typeAReply": "Typ een antwoord...",
    "unavailable": "Niet beschikbaar",
    "unflag": "Markering opheffen",
    "unflagMessage": "Weet je zeker dat je de markering voor deze post wilt verwijderen?",
    "unfollow": "Ontvolgen",
    "unknownEvent": "Onbekende gebeurtenis",
    "update": "Bijwerken",
    "updateFailedError": "Update mislukt: %@",
    "username": "Gebruikersnaam",
    "usernameMustStartWithLetter": "Gebruikersnaam moet beginnen met een letter",
    "usernamePlaceholder": "Gebruikersnaam",
    "usernameUnavailable": "Gebruikersnaam niet beschikbaar",
    "violence": "Geweld",
    "warning": "Waarschuwing",
    "webOfTrust": "Web van vertrouwen",
    "welcome": "Welkom!",
    "welcomeNostrich": "Welkom Nostrich!",
    "welcomeToFeed": "Welkom bij je feed!",
    "welcomeToNostr": "Welkom bij Nostr",
    "welcomeToNos": "Welkom bij Nos",
    "whatIsThis": "Wat is dit?",
    "whyAmISeeingThis": "Waarom zie ik dit?",
    "word": "Woord",
    "writeYourReply": "Schrijf je antwoord...",
    "yes": "Ja",
    "yesItsMe": "Ja, dat ben ik",
    "youDontFollowAnyone": "Je volgt nog niemand",
    "youHaventLikedAnyPosts": "Je hebt nog geen berichten geliket",
    "yourBio": "Je biografie",
    "yourDisplayName": "Je weergavenaam",
    "yourFeed": "Jouw feed",
    "yourLightnightAddress": "Je Lightning-adres",
    "yourNIP05": "Je NIP-05",
    "youreSet": "Je bent klaar!",
    "youveBlockedThisAuthor": "Je hebt deze auteur geblokkeerd",
    "zapAddress": "Zap-adres"
}

# Counter for tracking changes
added_count = 0
already_exists_count = 0

# Process each key in the strings dictionary
for key, value in data["strings"].items():
    if key in dutch_translations:
        # Check if the key already has a Dutch translation
        if "nl" in value.get("localizations", {}):
            current_translation = value["localizations"]["nl"]["stringUnit"]["value"]
            if current_translation != dutch_translations[key]:
                print(f"Key '{key}' already has Dutch translation: '{current_translation}', replacing with '{dutch_translations[key]}'")
                value["localizations"]["nl"]["stringUnit"]["value"] = dutch_translations[key]
                added_count += 1
            else:
                already_exists_count += 1
        else:
            # Add the Dutch translation if it doesn't exist
            if "localizations" not in value:
                value["localizations"] = {}
            
            value["localizations"]["nl"] = {
                "stringUnit": {
                    "state": "translated",
                    "value": dutch_translations[key]
                }
            }
            added_count += 1
            print(f"Added Dutch translation for '{key}': '{dutch_translations[key]}'")

# Write the updated data back to the file
with tempfile.NamedTemporaryFile('w', encoding='utf-8', delete=False) as temp:
    json.dump(data, temp, ensure_ascii=False, indent=2)
    temp_name = temp.name

# Replace the original file with the new one
shutil.move(temp_name, file_path)

print(f"Completed: Added {added_count} Dutch translations, {already_exists_count} already existed")
print(f"Original file backed up at {backup_file}")